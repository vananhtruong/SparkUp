@{
    ViewData["Title"] = "Dashboard";
}

<div class="container-fluid">
    <div class="row">
        <div class="col-md-6 col-lg-3">
            <div class="iq-card iq-card-block iq-card-stretch iq-card-height">
                <div class="iq-card-body">
                    <div class="d-flex align-items-center">
                        <div class="rounded-circle iq-card-icon bg-primary"><i class="ri-user-line"></i></div>
                        <div class="text-left ml-3">
                            <h2 class="mb-0"><span class="counter">7900</span></h2>
                            <h5 class="">Người dùng</h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="iq-card iq-card-block iq-card-stretch iq-card-height">
                <div class="iq-card-body">
                    <div class="d-flex align-items-center">
                        <div class="rounded-circle iq-card-icon bg-danger"><i class="ri-tools-line"></i></div>
                        <div class="text-left ml-3">
                            <h2 class="mb-0"><span class="counter">1200</span></h2>
                            <h5 class="">Thợ</h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="iq-card iq-card-block iq-card-stretch iq-card-height">
                <div class="iq-card-body">
                    <div class="d-flex align-items-center">
                        <div class="rounded-circle iq-card-icon bg-warning"><i class="ri-calendar-check-line"></i></div>
                        <div class="text-left ml-3">
                            <h2 class="mb-0"><span class="counter">4500</span></h2>
                            <h5 class="">Đặt lịch</h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="iq-card iq-card-block iq-card-stretch iq-card-height">
                <div class="iq-card-body">
                    <div class="d-flex align-items-center">
                        <div class="rounded-circle iq-card-icon bg-success"><i class="ri-money-dollar-circle-line"></i></div>
                        <div class="text-left ml-3">
                            <h2 class="mb-0"><span class="counter">75000000</span>đ</h2>
                            <h5 class="">Doanh thu</h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-8">
            <div class="iq-card iq-card-block iq-card-stretch iq-card-height">
                <div class="iq-card-header d-flex justify-content-between align-items-center">
                    <div class="iq-header-title">
                        <h4 class="card-title">Thống kê doanh thu</h4>
                    </div>
                    <div class="iq-card-header-toolbar d-flex align-items-center">
                        <div class="dropdown">
                            <span class="dropdown-toggle text-primary" id="dropdownMenuButton5" data-toggle="dropdown">
                                <i class="ri-more-2-fill"></i>
                            </span>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton5">
                                <a class="dropdown-item" href="#"><i class="ri-eye-fill mr-2"></i>Xem</a>
                                <a class="dropdown-item" href="#"><i class="ri-download-2-fill mr-2"></i>Tải xuống</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="iq-card-body">
                    <div id="chartContainer" style="height: 370px; width: 100%;"></div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="iq-card iq-card-block iq-card-stretch iq-card-height">
                <div class="iq-card-header d-flex justify-content-between align-items-center">
                    <div class="iq-header-title">
                        <h4 class="card-title">Loại dịch vụ phổ biến</h4>
                    </div>
                </div>
                <div class="iq-card-body">
                    <div id="chartPie" style="height: 370px; width: 100%;"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div class="iq-card iq-card-block iq-card-stretch iq-card-height">
                <div class="iq-card-header d-flex justify-content-between align-items-center">
                    <div class="iq-header-title">
                        <h4 class="card-title">Đặt lịch gần đây</h4>
                    </div>
                </div>
                <div class="iq-card-body">
                    <div class="table-responsive">
                        <table class="table mb-0 table-borderless">
                            <thead>
                                <tr>
                                    <th scope="col">Mã đặt</th>
                                    <th scope="col">Khách hàng</th>
                                    <th scope="col">Thợ</th>
                                    <th scope="col">Dịch vụ</th>
                                    <th scope="col">Ngày đặt</th>
                                    <th scope="col">Trạng thái</th>
                                    <th scope="col">Giá tiền</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>#BK0012</td>
                                    <td>Nguyễn Văn A</td>
                                    <td>Trần Văn B</td>
                                    <td>Sửa điện</td>
                                    <td>20/05/2025</td>
                                    <td><div class="badge badge-success">Hoàn thành</div></td>
                                    <td>500.000đ</td>
                                </tr>
                                <tr>
                                    <td>#BK0013</td>
                                    <td>Lê Thị C</td>
                                    <td>Phạm Văn D</td>
                                    <td>Sửa chữa</td>
                                    <td>21/05/2025</td>
                                    <td><div class="badge badge-danger">Đã huỷ</div></td>
                                    <td>350.000đ</td>
                                </tr>
                                <tr>
                                    <td>#BK0014</td>
                                    <td>Trần Văn E</td>
                                    <td>Nguyễn Thị F</td>
                                    <td>Dọn dẹp</td>
                                    <td>22/05/2025</td>
                                    <td><div class="badge badge-warning">Đang thực hiện</div></td>
                                    <td>450.000đ</td>
                                </tr>
                                <tr>
                                    <td>#BK0015</td>
                                    <td>Lê Văn G</td>
                                    <td>Phạm Thị H</td>
                                    <td>Vận chuyển</td>
                                    <td>23/05/2025</td>
                                    <td><div class="badge badge-info">Chờ xác nhận</div></td>
                                    <td>600.000đ</td>
                                </tr>
                                <tr>
                                    <td>#BK0016</td>
                                    <td>Ngô Văn I</td>
                                    <td>Hoàng Thị K</td>
                                    <td>Sửa ống nước</td>
                                    <td>24/05/2025</td>
                                    <td><div class="badge badge-success">Hoàn thành</div></td>
                                    <td>420.000đ</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
    <script type="text/javascript">
        window.onload = function () {
            var chart = new CanvasJS.Chart("chartContainer", {
                animationEnabled: true,
                theme: "light2",
                axisY: {
                    title: "Doanh thu (VNĐ)",
                    valueFormatString: "#,##0đ"
                },
                data: [{
                    type: "column",
                    dataPoints: [
                        { y: 7500000, label: "Tháng 1" },
                        { y: 6200000, label: "Tháng 2" },
                        { y: 8100000, label: "Tháng 3" },
                        { y: 7350000, label: "Tháng 4" },
                        { y: 9600000, label: "Tháng 5" },
                        { y: 8900000, label: "Tháng 6" }
                    ]
                }]
            });
            chart.render();

            var pieChart = new CanvasJS.Chart("chartPie", {
                animationEnabled: true,
                data: [{
                    type: "pie",
                    startAngle: 240,
                    showInLegend: true,
                    legendText: "{label}",
                    indexLabel: "{label} - {y}%",
                    dataPoints: [
                        { y: 35, label: "Sửa chữa tổng hợp" },
                        { y: 25, label: "Sửa điện" },
                        { y: 20, label: "Dọn dẹp" },
                        { y: 15, label: "Sửa ống nước" },
                        { y: 5, label: "Vận chuyển" }
                    ]
                }]
            });
            pieChart.render();
        }
    </script>
}
